SimpleStorage.sol — Security Audit Report

Author: Michael Bolanos
Date: 2025-12-05
Target Contract: SimpleStorage.sol
Network: zkSync Era Sepolia
Contract Address: 0x60bd10476Dd5D7BE84CA24E1eC80B686D72809f3
Deployment Tx: 0x3fa582257027e2beab00d33abe6a92ffb17c5357dff5e984c6db7c8e66766022



**1. Executive Summary**


This report documents a security assessment of the SimpleStorage smart contract deployed on zkSync Era Sepolia. The contract stores:
   
    •    A uint256 value (myFavoriteNumber)
    
    •    A dynamic array of Person structs (listOfPeople)
    
    •    A mapping from string → uint256 (nameToFavoriteNumber)

The contract is educational and intentionally simple.
All identified issues are Informational and relate to best practices rather than security vulnerabilities.



**2. Contract Overview**


Code Summary

The contract exposes three main state-changing functions:
   
    •    store(uint256): Updates myFavoriteNumber
    
    •    addPerson(string,uint256): Appends a Person to listOfPeople and updates the mapping
    
    •    Public getters (auto-generated by Solidity) allow reading stored values

All state-modifying functions are public and permissionless by design.

Key Behaviors
   
    •    store(uint256) updates global state
    
    •    retrieve() returns myFavoriteNumber
    
    •    addPerson(string,uint256) updates listOfPeople and mapping

All storage writes are permanent and unprotected.



**3. Threat Model**

Actors
   
    •    EOA users: Can call store() and addPerson(), read via retrieve() and getters
    
    •    External contracts: Can invoke public functions if desired
    
    •    Deploying address has no special privileges

Assets
   
    •    myFavoriteNumber
    
    •    listOfPeople array
    
    •    nameToFavoriteNumber mapping
    
    •    Gas and storage costs on the network

Trust Model
   
    •    No access control: Any user can modify contract state
    
    •    No restrictions on input: Strings and numbers are user-controlled
    
    •    No owner / admin functionality exists

Abuse Cases
   
    •    Spam storage writes increasing gas/storage cost
    
    •    Inserting extremely large strings into addPerson() (DoS via cost)
    
    •    Overwriting myFavoriteNumber with arbitrary values
    
    •    Mapping key collisions via identical string names

These behaviors are expected for a teaching contract.



**4. Findings**


*Finding 1: Missing Access Control (Informational)*

All state-changing functions are public.
Anyone can overwrite stored values or add arbitrary people.

This is acceptable for educational purposes but not for production.

Recommendation: Add Ownable or RBAC if intended for restricted use.


*Finding 2:  Lack of Events (Informational)*

The contract performs state writes without emitting events.
Events improve transparency, indexing, and off-chain monitoring.

Recommendation: Emit events for store() and addPerson().


*Finding 3 — String Inputs May Increase Gas Costs (Informational)*

Using unbounded user-input strings can increase calldata cost and impact L2 batch fees.

Recommendation: Consider using bytes32 identifiers for names in production.


*Finding 4 — Redundant Public Variables (Minor)*

myFavoriteNumber and listOfPeople already generate getter functions automatically.
The retrieve() function duplicates this behavior.

Recommendation: Consider removing retrieve() or making it internal.


*Finding 5 — No Input Validation (Informational)*

addPerson() accepts any string, including empty strings or extremely long names.

Recommendation: Add require() checks if data integrity matters.


**5. Recommendations Summary**

    •    Add events for transparency

    •    Introduce access control if needed

    •    Validate input where appropriate

    •    Use fixed-size types for more predictable gas usage

    •    Consider separating write and read concerns for clarity


**6. Tools & Methodology**

    •    Manual line-by-line code review

    •    Remix static analyzer

    •    zkSync Era Sepolia block explorer

    •    Manual interaction tests (store(7) → retrieve() = 7)

    •    Gas observation through Remix during calls


**7. Appendix**


Retrieved from zkSync explorer for verification:
0x20a4c95004f85176cef8b7400b194f328f55962a64f0b1629567ed7db565045b

Deployment Metadata
  
    •    Contract Address: 0x60bd074d765d57DF84C24AE1cC80B668dD72809f
    
    •    Deployment Tx: 0x3fa582250727e2beab00d33ab6a92ffb17c5357dff5e984c6db7c8e66766022
    
    •    Network: zkSync Era Sepolia Testnet

Compiler Version: zkVM-0.8.24-1.0.2

Zksolc Version: v1.5.6

Optimization: Yes, with mode 3

Explorer contract link: https://sepolia.explorer.zksync.io/address/0x60bd10476Dd5D7BE84CA24E1eC80B686D72809f3




